
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Milk Me Not</title>
    <meta name="description" content="Discover and rate your perfect plant-based milk" />
    <meta name="author" content="Lovable" />
    <link rel="icon" href="/lovable-uploads/9f030b65-074a-4e64-82d9-f0eba7246e1a.png" type="image/png" />
    <meta property="og:image" content="/og-image.png" />
    
    <!-- Critical CSS loading optimization -->
    <script>
      // Optimize CSS loading to prevent render blocking
      (function() {
        // Immediately observe for CSS links being added by Vite
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
              if (node.tagName === 'LINK' && 
                  node.rel === 'stylesheet' && 
                  node.href && 
                  node.href.includes('assets/index-') && 
                  node.href.includes('.css')) {
                
                // Convert blocking CSS to non-blocking preload
                node.rel = 'preload';
                node.as = 'style';
                node.onload = function() {
                  this.rel = 'stylesheet';
                  this.onload = null;
                };
                
                // Fallback for browsers without JS
                const noscript = document.createElement('noscript');
                const fallbackLink = document.createElement('link');
                fallbackLink.rel = 'stylesheet';
                fallbackLink.href = node.href;
                noscript.appendChild(fallbackLink);
                node.parentNode.insertBefore(noscript, node.nextSibling);
              }
            });
          });
        });
        
        // Start observing
        observer.observe(document.head, { childList: true });
        
        // Also check existing links immediately
        document.addEventListener('DOMContentLoaded', function() {
          const cssLinks = document.querySelectorAll('link[rel="stylesheet"]');
          cssLinks.forEach(function(link) {
            if (link.href.includes('assets/index-') && link.href.includes('.css')) {
              link.rel = 'preload';
              link.as = 'style';
              link.onload = function() {
                this.rel = 'stylesheet';
                this.onload = null;
              };
            }
          });
          
          // Stop observing once DOM is ready
          observer.disconnect();
        });
      })();
    </script>
    
    <!-- Preload hint for faster CSS discovery -->
    <link rel="dns-prefetch" href="//mondriaan-goose.lovable.app">
  </head>

  <body>
    <div id="root"></div>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
